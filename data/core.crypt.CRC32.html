<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=None">
  <style type="text/css">
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }
body .hll { background-color: #ffffcc }
body  { background: #ffffff; }
body .c { color: #aaaaaa; font-style: italic } /* Comment */
body .err { color: #F00000; background-color: #F0A0A0 } /* Error */
body .k { color: #0000aa } /* Keyword */
body .cm { color: #aaaaaa; font-style: italic } /* Comment.Multiline */
body .cp { color: #4c8317 } /* Comment.Preproc */
body .c1 { color: #aaaaaa; font-style: italic } /* Comment.Single */
body .cs { color: #0000aa; font-style: italic } /* Comment.Special */
body .gd { color: #aa0000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .gr { color: #aa0000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #00aa00 } /* Generic.Inserted */
body .go { color: #888888 } /* Generic.Output */
body .gp { color: #555555 } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #aa0000 } /* Generic.Traceback */
body .kc { color: #0000aa } /* Keyword.Constant */
body .kd { color: #0000aa } /* Keyword.Declaration */
body .kn { color: #0000aa } /* Keyword.Namespace */
body .kp { color: #0000aa } /* Keyword.Pseudo */
body .kr { color: #0000aa } /* Keyword.Reserved */
body .kt { color: #00aaaa } /* Keyword.Type */
body .m { color: #009999 } /* Literal.Number */
body .s { color: #aa5500 } /* Literal.String */
body .na { color: #1e90ff } /* Name.Attribute */
body .nb { color: #00aaaa } /* Name.Builtin */
body .nc { color: #00aa00; text-decoration: underline } /* Name.Class */
body .no { color: #aa0000 } /* Name.Constant */
body .nd { color: #888888 } /* Name.Decorator */
body .ni { color: #800000; font-weight: bold } /* Name.Entity */
body .nf { color: #00aa00 } /* Name.Function */
body .nn { color: #00aaaa; text-decoration: underline } /* Name.Namespace */
body .nt { color: #1e90ff; font-weight: bold } /* Name.Tag */
body .nv { color: #aa0000 } /* Name.Variable */
body .ow { color: #0000aa } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mf { color: #009999 } /* Literal.Number.Float */
body .mh { color: #009999 } /* Literal.Number.Hex */
body .mi { color: #009999 } /* Literal.Number.Integer */
body .mo { color: #009999 } /* Literal.Number.Oct */
body .sb { color: #aa5500 } /* Literal.String.Backtick */
body .sc { color: #aa5500 } /* Literal.String.Char */
body .sd { color: #aa5500 } /* Literal.String.Doc */
body .s2 { color: #aa5500 } /* Literal.String.Double */
body .se { color: #aa5500 } /* Literal.String.Escape */
body .sh { color: #aa5500 } /* Literal.String.Heredoc */
body .si { color: #aa5500 } /* Literal.String.Interpol */
body .sx { color: #aa5500 } /* Literal.String.Other */
body .sr { color: #009999 } /* Literal.String.Regex */
body .s1 { color: #aa5500 } /* Literal.String.Single */
body .ss { color: #0000aa } /* Literal.String.Symbol */
body .bp { color: #00aaaa } /* Name.Builtin.Pseudo */
body .vc { color: #aa0000 } /* Name.Variable.Class */
body .vg { color: #aa0000 } /* Name.Variable.Global */
body .vi { color: #aa0000 } /* Name.Variable.Instance */
body .il { color: #009999 } /* Literal.Number.Integer.Long */

  </style>
</head>
<body>
<h2></h2>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><a name="line-1"></a><span class="cm">/*</span>
<a name="line-2"></a><span class="cm">==================================================================================================</span>
<a name="line-3"></a><span class="cm">  Core - JavaScript Foundation</span>
<a name="line-4"></a><span class="cm">  Copyright 2010-2012 Zynga Inc.</span>
<a name="line-5"></a><span class="cm">--------------------------------------------------------------------------------------------------</span>
<a name="line-6"></a><span class="cm">  Inspired by: http://www.webtoolkit.info/javascript-crc32.html</span>
<a name="line-7"></a><span class="cm">  Removed unicode support</span>
<a name="line-8"></a><span class="cm">  Improved performance with numeric array lookup instead of substrings</span>
<a name="line-9"></a><span class="cm">==================================================================================================</span>
<a name="line-10"></a><span class="cm">*/</span>
<a name="line-11"></a>
<a name="line-12"></a><span class="cm">/**</span>
<a name="line-13"></a><span class="cm"> * Implements the CRC32 checksum</span>
<a name="line-14"></a><span class="cm"> * </span>
<a name="line-15"></a><span class="cm"> * See also: http://en.wikipedia.org/wiki/CRC-32</span>
<a name="line-16"></a><span class="cm"> */</span>
<a name="line-17"></a><span class="nx">core</span><span class="p">.</span><span class="nx">Module</span><span class="p">(</span><span class="s2">&quot;core.crypt.CRC32&quot;</span><span class="p">,</span>
<a name="line-18"></a><span class="p">{</span>
<a name="line-19"></a>  <span class="nx">checksum</span> <span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span>
<a name="line-20"></a>  <span class="p">{</span>
<a name="line-21"></a>    <span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1996959894</span><span class="p">,</span> <span class="mi">3993919788</span><span class="p">,</span> <span class="mi">2567524794</span><span class="p">,</span> <span class="mi">124634137</span><span class="p">,</span> <span class="mi">1886057615</span><span class="p">,</span> <span class="mi">3915621685</span><span class="p">,</span> <span class="mi">2657392035</span><span class="p">,</span> <span class="mi">249268274</span><span class="p">,</span> <span class="mi">2044508324</span><span class="p">,</span> <span class="mi">3772115230</span><span class="p">,</span> <span class="mi">2547177864</span><span class="p">,</span> <span class="mi">162941995</span><span class="p">,</span> <span class="mi">2125561021</span><span class="p">,</span> <span class="mi">3887607047</span><span class="p">,</span> <span class="mi">2428444049</span><span class="p">,</span> <span class="mi">498536548</span><span class="p">,</span> <span class="mi">1789927666</span><span class="p">,</span> <span class="mi">4089016648</span><span class="p">,</span> <span class="mi">2227061214</span><span class="p">,</span> <span class="mi">450548861</span><span class="p">,</span> <span class="mi">1843258603</span><span class="p">,</span> <span class="mi">4107580753</span><span class="p">,</span> <span class="mi">2211677639</span><span class="p">,</span> <span class="mi">325883990</span><span class="p">,</span> <span class="mi">1684777152</span><span class="p">,</span> <span class="mi">4251122042</span><span class="p">,</span> <span class="mi">2321926636</span><span class="p">,</span> <span class="mi">335633487</span><span class="p">,</span> <span class="mi">1661365465</span><span class="p">,</span> <span class="mi">4195302755</span><span class="p">,</span> <span class="mi">2366115317</span><span class="p">,</span> <span class="mi">997073096</span><span class="p">,</span> <span class="mi">1281953886</span><span class="p">,</span> <span class="mi">3579855332</span><span class="p">,</span> <span class="mi">2724688242</span><span class="p">,</span> <span class="mi">1006888145</span><span class="p">,</span> <span class="mi">1258607687</span><span class="p">,</span> <span class="mi">3524101629</span><span class="p">,</span> <span class="mi">2768942443</span><span class="p">,</span> <span class="mi">901097722</span><span class="p">,</span> <span class="mi">1119000684</span><span class="p">,</span> <span class="mi">3686517206</span><span class="p">,</span> <span class="mi">2898065728</span><span class="p">,</span> <span class="mi">853044451</span><span class="p">,</span> <span class="mi">1172266101</span><span class="p">,</span> <span class="mi">3705015759</span><span class="p">,</span> <span class="mi">2882616665</span><span class="p">,</span> <span class="mi">651767980</span><span class="p">,</span> <span class="mi">1373503546</span><span class="p">,</span> <span class="mi">3369554304</span><span class="p">,</span> <span class="mi">3218104598</span><span class="p">,</span> <span class="mi">565507253</span><span class="p">,</span> <span class="mi">1454621731</span><span class="p">,</span> <span class="mi">3485111705</span><span class="p">,</span> <span class="mi">3099436303</span><span class="p">,</span> <span class="mi">671266974</span><span class="p">,</span> <span class="mi">1594198024</span><span class="p">,</span> <span class="mi">3322730930</span><span class="p">,</span> <span class="mi">2970347812</span><span class="p">,</span> <span class="mi">795835527</span><span class="p">,</span> <span class="mi">1483230225</span><span class="p">,</span> <span class="mi">3244367275</span><span class="p">,</span> <span class="mi">3060149565</span><span class="p">,</span> <span class="mi">1994146192</span><span class="p">,</span> <span class="mi">31158534</span><span class="p">,</span> <span class="mi">2563907772</span><span class="p">,</span> <span class="mi">4023717930</span><span class="p">,</span> <span class="mi">1907459465</span><span class="p">,</span> <span class="mi">112637215</span><span class="p">,</span> <span class="mi">2680153253</span><span class="p">,</span> <span class="mi">3904427059</span><span class="p">,</span> <span class="mi">2013776290</span><span class="p">,</span> <span class="mi">251722036</span><span class="p">,</span> <span class="mi">2517215374</span><span class="p">,</span> <span class="mi">3775830040</span><span class="p">,</span> <span class="mi">2137656763</span><span class="p">,</span> <span class="mi">141376813</span><span class="p">,</span> <span class="mi">2439277719</span><span class="p">,</span> <span class="mi">3865271297</span><span class="p">,</span> <span class="mi">1802195444</span><span class="p">,</span> <span class="mi">476864866</span><span class="p">,</span> <span class="mi">2238001368</span><span class="p">,</span> <span class="mi">4066508878</span><span class="p">,</span> <span class="mi">1812370925</span><span class="p">,</span> <span class="mi">453092731</span><span class="p">,</span> <span class="mi">2181625025</span><span class="p">,</span> <span class="mi">4111451223</span><span class="p">,</span> <span class="mi">1706088902</span><span class="p">,</span> <span class="mi">314042704</span><span class="p">,</span> <span class="mi">2344532202</span><span class="p">,</span> <span class="mi">4240017532</span><span class="p">,</span> <span class="mi">1658658271</span><span class="p">,</span> <span class="mi">366619977</span><span class="p">,</span> <span class="mi">2362670323</span><span class="p">,</span> <span class="mi">4224994405</span><span class="p">,</span> <span class="mi">1303535960</span><span class="p">,</span> <span class="mi">984961486</span><span class="p">,</span> <span class="mi">2747007092</span><span class="p">,</span> <span class="mi">3569037538</span><span class="p">,</span> <span class="mi">1256170817</span><span class="p">,</span> <span class="mi">1037604311</span><span class="p">,</span> <span class="mi">2765210733</span><span class="p">,</span> <span class="mi">3554079995</span><span class="p">,</span> <span class="mi">1131014506</span><span class="p">,</span> <span class="mi">879679996</span><span class="p">,</span> <span class="mi">2909243462</span><span class="p">,</span> <span class="mi">3663771856</span><span class="p">,</span> <span class="mi">1141124467</span><span class="p">,</span> <span class="mi">855842277</span><span class="p">,</span> <span class="mi">2852801631</span><span class="p">,</span> <span class="mi">3708648649</span><span class="p">,</span> <span class="mi">1342533948</span><span class="p">,</span> <span class="mi">654459306</span><span class="p">,</span> <span class="mi">3188396048</span><span class="p">,</span> <span class="mi">3373015174</span><span class="p">,</span> <span class="mi">1466479909</span><span class="p">,</span> <span class="mi">544179635</span><span class="p">,</span> <span class="mi">3110523913</span><span class="p">,</span> <span class="mi">3462522015</span><span class="p">,</span> <span class="mi">1591671054</span><span class="p">,</span> <span class="mi">702138776</span><span class="p">,</span> <span class="mi">2966460450</span><span class="p">,</span> <span class="mi">3352799412</span><span class="p">,</span> <span class="mi">1504918807</span><span class="p">,</span> <span class="mi">783551873</span><span class="p">,</span> <span class="mi">3082640443</span><span class="p">,</span> <span class="mi">3233442989</span><span class="p">,</span> <span class="mi">3988292384</span><span class="p">,</span> <span class="mi">2596254646</span><span class="p">,</span> <span class="mi">62317068</span><span class="p">,</span> <span class="mi">1957810842</span><span class="p">,</span> <span class="mi">3939845945</span><span class="p">,</span> <span class="mi">2647816111</span><span class="p">,</span> <span class="mi">81470997</span><span class="p">,</span> <span class="mi">1943803523</span><span class="p">,</span> <span class="mi">3814918930</span><span class="p">,</span> <span class="mi">2489596804</span><span class="p">,</span> <span class="mi">225274430</span><span class="p">,</span> <span class="mi">2053790376</span><span class="p">,</span> <span class="mi">3826175755</span><span class="p">,</span> <span class="mi">2466906013</span><span class="p">,</span> <span class="mi">167816743</span><span class="p">,</span> <span class="mi">2097651377</span><span class="p">,</span> <span class="mi">4027552580</span><span class="p">,</span> <span class="mi">2265490386</span><span class="p">,</span> <span class="mi">503444072</span><span class="p">,</span> <span class="mi">1762050814</span><span class="p">,</span> <span class="mi">4150417245</span><span class="p">,</span> <span class="mi">2154129355</span><span class="p">,</span> <span class="mi">426522225</span><span class="p">,</span> <span class="mi">1852507879</span><span class="p">,</span> <span class="mi">4275313526</span><span class="p">,</span> <span class="mi">2312317920</span><span class="p">,</span> <span class="mi">282753626</span><span class="p">,</span> <span class="mi">1742555852</span><span class="p">,</span> <span class="mi">4189708143</span><span class="p">,</span> <span class="mi">2394877945</span><span class="p">,</span> <span class="mi">397917763</span><span class="p">,</span> <span class="mi">1622183637</span><span class="p">,</span> <span class="mi">3604390888</span><span class="p">,</span> <span class="mi">2714866558</span><span class="p">,</span> <span class="mi">953729732</span><span class="p">,</span> <span class="mi">1340076626</span><span class="p">,</span> <span class="mi">3518719985</span><span class="p">,</span> <span class="mi">2797360999</span><span class="p">,</span> <span class="mi">1068828381</span><span class="p">,</span> <span class="mi">1219638859</span><span class="p">,</span> <span class="mi">3624741850</span><span class="p">,</span> <span class="mi">2936675148</span><span class="p">,</span> <span class="mi">906185462</span><span class="p">,</span> <span class="mi">1090812512</span><span class="p">,</span> <span class="mi">3747672003</span><span class="p">,</span> <span class="mi">2825379669</span><span class="p">,</span> <span class="mi">829329135</span><span class="p">,</span> <span class="mi">1181335161</span><span class="p">,</span> <span class="mi">3412177804</span><span class="p">,</span> <span class="mi">3160834842</span><span class="p">,</span> <span class="mi">628085408</span><span class="p">,</span> <span class="mi">1382605366</span><span class="p">,</span> <span class="mi">3423369109</span><span class="p">,</span> <span class="mi">3138078467</span><span class="p">,</span> <span class="mi">570562233</span><span class="p">,</span> <span class="mi">1426400815</span><span class="p">,</span> <span class="mi">3317316542</span><span class="p">,</span> <span class="mi">2998733608</span><span class="p">,</span> <span class="mi">733239954</span><span class="p">,</span> <span class="mi">1555261956</span><span class="p">,</span> <span class="mi">3268935591</span><span class="p">,</span> <span class="mi">3050360625</span><span class="p">,</span> <span class="mi">752459403</span><span class="p">,</span> <span class="mi">1541320221</span><span class="p">,</span> <span class="mi">2607071920</span><span class="p">,</span> <span class="mi">3965973030</span><span class="p">,</span> <span class="mi">1969922972</span><span class="p">,</span> <span class="mi">40735498</span><span class="p">,</span> <span class="mi">2617837225</span><span class="p">,</span> <span class="mi">3943577151</span><span class="p">,</span> <span class="mi">1913087877</span><span class="p">,</span> <span class="mi">83908371</span><span class="p">,</span> <span class="mi">2512341634</span><span class="p">,</span> <span class="mi">3803740692</span><span class="p">,</span> <span class="mi">2075208622</span><span class="p">,</span> <span class="mi">213261112</span><span class="p">,</span> <span class="mi">2463272603</span><span class="p">,</span> <span class="mi">3855990285</span><span class="p">,</span> <span class="mi">2094854071</span><span class="p">,</span> <span class="mi">198958881</span><span class="p">,</span> <span class="mi">2262029012</span><span class="p">,</span> <span class="mi">4057260610</span><span class="p">,</span> <span class="mi">1759359992</span><span class="p">,</span> <span class="mi">534414190</span><span class="p">,</span> <span class="mi">2176718541</span><span class="p">,</span> <span class="mi">4139329115</span><span class="p">,</span> <span class="mi">1873836001</span><span class="p">,</span> <span class="mi">414664567</span><span class="p">,</span> <span class="mi">2282248934</span><span class="p">,</span> <span class="mi">4279200368</span><span class="p">,</span> <span class="mi">1711684554</span><span class="p">,</span> <span class="mi">285281116</span><span class="p">,</span> <span class="mi">2405801727</span><span class="p">,</span> <span class="mi">4167216745</span><span class="p">,</span> <span class="mi">1634467795</span><span class="p">,</span> <span class="mi">376229701</span><span class="p">,</span> <span class="mi">2685067896</span><span class="p">,</span> <span class="mi">3608007406</span><span class="p">,</span> <span class="mi">1308918612</span><span class="p">,</span> <span class="mi">956543938</span><span class="p">,</span> <span class="mi">2808555105</span><span class="p">,</span> <span class="mi">3495958263</span><span class="p">,</span> <span class="mi">1231636301</span><span class="p">,</span> <span class="mi">1047427035</span><span class="p">,</span> <span class="mi">2932959818</span><span class="p">,</span> <span class="mi">3654703836</span><span class="p">,</span> <span class="mi">1088359270</span><span class="p">,</span> <span class="mi">936918000</span><span class="p">,</span> <span class="mi">2847714899</span><span class="p">,</span> <span class="mi">3736837829</span><span class="p">,</span> <span class="mi">1202900863</span><span class="p">,</span> <span class="mi">817233897</span><span class="p">,</span> <span class="mi">3183342108</span><span class="p">,</span> <span class="mi">3401237130</span><span class="p">,</span> <span class="mi">1404277552</span><span class="p">,</span> <span class="mi">615818150</span><span class="p">,</span> <span class="mi">3134207493</span><span class="p">,</span> <span class="mi">3453421203</span><span class="p">,</span> <span class="mi">1423857449</span><span class="p">,</span> <span class="mi">601450431</span><span class="p">,</span> <span class="mi">3009837614</span><span class="p">,</span> <span class="mi">3294710456</span><span class="p">,</span> <span class="mi">1567103746</span><span class="p">,</span> <span class="mi">711928724</span><span class="p">,</span> <span class="mi">3020668471</span><span class="p">,</span> <span class="mi">3272380065</span><span class="p">,</span> <span class="mi">1510334235</span><span class="p">,</span> <span class="mi">755167117</span><span class="p">];</span>
<a name="line-22"></a>
<a name="line-23"></a>    <span class="cm">/**</span>
<a name="line-24"></a><span class="cm">     * {Integer} Returns the CRC-32 checksum of @str {String}</span>
<a name="line-25"></a><span class="cm">     */</span>
<a name="line-26"></a>    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
<a name="line-27"></a>    <span class="p">{</span>
<a name="line-28"></a>      <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">encodeUtf8</span><span class="p">();</span>
<a name="line-29"></a>      
<a name="line-30"></a>      <span class="kd">var</span> <span class="nx">crc</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a name="line-31"></a>      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">l</span><span class="o">=</span><span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<a name="line-32"></a>        <span class="nx">crc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">crc</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">^</span> <span class="nx">table</span><span class="p">[(</span><span class="nx">crc</span> <span class="o">^</span> <span class="nx">str</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">];</span>
<a name="line-33"></a>      <span class="p">}</span>
<a name="line-34"></a>
<a name="line-35"></a>      <span class="k">return</span> <span class="nx">crc</span> <span class="o">^</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a name="line-36"></a>    <span class="p">}</span>
<a name="line-37"></a>  <span class="p">})()</span>
<a name="line-38"></a><span class="p">});</span>
</pre></div>
</td></tr></table></body>
</html>
